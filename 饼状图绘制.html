<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<div class="container ">
  <canvas id="cavs" width="600px" height="600px">
  	你的浏览器不支持canvas，请升级浏览器.
  </canvas>
</div>
<script>
  (function(){
  	var canvas = document.getElementById("cavs");
  	var ctx = canvas.getContext("2d");
  	canvas.style.border = "1px solid black";
  	canvas.style.backgroundColor ="#000";
  	var data = [{"value": .2, "color": "red", "title": "应届生"},
  				{"value": .3, "color": "green", "title": "社招生"},
  				{"value": .4, "color": "yellow", "title": "老学员推荐"},
  				{"value": .1, "color": "blue", "title": "公开课"}];
  	var start = -90;
  	var x0 = 300, y0 = 300;
  	var radius = 200;
  	for (var i = 0; i < data.length; i++) {
  		ctx.beginPath();
  		ctx.moveTo(x0, y0);
  		ctx.fillStyle = data[i].color;
  		var angle = data[i].value*360;
  		var startAngle = start * Math.PI/180;
  		var endAngle = (start + angle) * Math.PI/180;
  		ctx.arc(x0, y0, radius, startAngle, endAngle);
  		var txt = data[i].value *100+"%";
  		var txtAngle = start + 1/2 * angle;
  		var x = x0 + Math.cos(txtAngle * Math.PI / 180)*(radius + 20);
  		var y = y0 + Math.sin(txtAngle * Math.PI / 180)*(radius + 20);
  		if (txtAngle > 90 && txtAngle < 270) {
  			ctx.textAlign = "end"
  		}

  		ctx.fillText(txt, x, y);
  		ctx.fill();
  		start += angle;
  	}
  })();
</script>
</body>
</html>